<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.b4.apollo.product.model.dao.ProductDAO">

    <resultMap type="com.b4.apollo.product.model.dto.ProductDTO" id="productResultMap">
        <id property="productNo" column="PRODUCT_NO"/>
        <result property="productName" column="PRODUCT_NAME"/>
        <result property="productPrice" column="PRODUCT_PRICE"/>
        <result property="productDesc" column="PRODUCT_DESC"/>
        <result property="productQty" column="PRODUCT_QTY"/>
        <result property="categoryCode" column="CATEGORY_CODE"/>
    </resultMap>

    <select id="productList" resultMap="productResultMap"><!-- ?????? ????-->
        SELECT
            A.*
        FROM TBL_PRODUCT A
        WHERE A.PRODUCT_QTY > 0
        ORDER BY PRODUCT_NO
    </select>
    <select id="productDetail" resultMap="productResultMap"><!-- ?????? ????-->
        SELECT
            A.*
        FROM TBL_PRODUCT A
        WHERE A.PRODUCT_NO = #{productNo}
    </select>


    <insert id = "registProduct" parameterType="com.b4.apollo.product.model.dto.ProductDTO">

        INSERT
        INTO TBL_PRODUCT A
            (
               A.PRODUCT_NO
             , A.PRODUCT_NAME
             , A.PRODUCT_PRICE
             , A.PRODUCT_DESC
             , A.PRODUCT_QTY
             , A.CATEGORY_CODE
        )
        VALUES
            (
            SEQ_PRODUCT_NO.NEXTVAL
                , #{ productName }
                , #{ productPrice }
                , #{ productDesc }
                , #{ productQty }
                , #{ categoryCode }

            )

    </insert>

    <!-- 예약 수정 -->
    <update id="editProduct">
        UPDATE TBL_PRODUCT A
            A.PRODUCT_NAME = #{ productName }
          , A.PRODUCT_PRICE = #{ productPrice }
          , A.PRODUCT_DESC = #{ productDesc }
          , A.PRODUCT_QTY = #{ productQty }
          , A.CATEGORY_CODE = #{ categoryCode }
        WHERE A.PRODUCT_NO = #{ productNo }

    </update>

    <!-- 예약 삭제 -->
    <delete id="productDelete" parameterType="_int">
        DELETE
        FROM TBL_PRODUCT
        WHERE PRODUCT_NO = #{ productNo }
    </delete>
</mapper>