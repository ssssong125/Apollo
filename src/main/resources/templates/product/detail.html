<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf?.token}">
    <meta name="_csrf_header" th:content="${_csrf?.headerName}">

    <title>Title</title>
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--    <link rel="stylesheet" type="text/css" th:href="@{ /css/cart/style.css }">-->
    <link href="/static/css/style.css" rel="stylesheet" type="text/css" />
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        tr{
            color: white;
        }
        /*페이지 설정*/
        body{
            background-color: black;
            color: white;
        }
        /*전체 폰트 설정*/
        @import url('https://fonts.googleapis.com/css2?family=Libre+Bodoni&display=swap');
        body{
            font-family: "Libre Bodoni", sans-serif;
            font-size: 1em;
            letter-spacing : 1px;
        }
        /*파트별 폰트 크기 설정*/
        .big-font{
            font-size: 3em;
        }
        .menu{
            font-size: 2em;
        }
        .mid-font{
            font-size: 1.5em;
        }
        /*인풋, 입력*/
        .text-input {
            width: 100%;
            border-top: none;
            border-left:none;
            border-right: none;
            border-bottom: solid 1px gray;
            background-color: transparent;
            color: white;
        }
        .text-input::placeholder {
            color: gray;
        }
        .text-input:focus{
            outline: none;   /* 아웃라인 지우기 */
            border-bottom: solid 1px #FFD700;
            color: #FFD700;
        }
        textarea {
            width: 100%;
            height: 150px;
            box-sizing: border-box;
            border: 1px solid gray;
            border-radius: 5px;
            resize: none;
            background-color: transparent;
            color: white;
        }
        textarea:focus{
            outline: none;   /* 아웃라인 지우기 */
            border: solid 1px #FFD700;
            color: #FFD700;
        }
        /*구분선*/
        .line{
            border: solid 1px gray;
            background-color: white;
        }
        .thick-line{
            border: solid 2px white;
            background-color: white;
        }
        .orange-button{
            background-color: #DF9438;
            color: black;
            width: 150px;
            height: 60px;
        }
        /*버튼*/
        .goldButton{
            width: 150px;
            height: 50px;
            border: solid #FFD700 2px;
            background: transparent;
            color: white;
            transition:all 0.9s, color 0.3s;
            overflow: hidden;
        }
        /*버튼 좌우에서 오는 효과*/
        /*button:hover{*/
        /*    color: black;*/
        /*    box-shadow: 150px 0 0 0 #FFD700 inset,*/
        /*    -150px 0 0 0 #FFD700 inset;*//*}*//*button:hover{*/
        /*    color: black;*/
        /*    box-shadow: 1000px 0 0 0 #FFD700 inset;*/
        /*}*/
        .goldButton,.goldButton::after {
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
            -o-transition: all 0.3s;
            transition: all 0.3s;}
        .goldButton {
            background: none;
            display: block;
            position: relative;
        }
        .goldButton::before,.goldButton::after {
            background: #FFD700;
            content: '';
            position: absolute;
            z-index: -1;
        }
        .goldButton:hover {
            color: black;
        }
        .goldButton::after {
            height: 100%;
            left: -5%;
            top: 0;
            transform: skew(-50deg);
            transition-duration: 0.6s;
            transform-origin: top left;
            width: 0;
        }
        .goldButton:hover:after {
            height: 100%;
            width: 135%;
        }
        .trashCan{
            background: url("/static/img/cart/trash.png");
            border: none;
            width: 32px;
            height: 32px;
            cursor: pointer;
        }
        /*이미지*/
        .product{
            width: 128px;
            height: 128px;
        }
        /*이미지 박스*/
        .paymentImgBox{
            position: relative;
            border-radius: 5px;
            height: 100px;
            width: 200px;
            overflow: hidden;
            border: solid 2px #FFD700;
        }
        .paymentImg{
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /*//하이퍼링크 스타일 제거*/
        /*  a {*/
        /*      text-decoration: none; // 밑줄제거*/
        /*  color: white;*/
        /*  }*/
        /*a:hover{*/
        /*    text-decoration: none;*/
        /*    color: #FFD700;*/
        /*}*/
        /*수직 정렬*/
        .v-align{
            word-wrap: break-word;
            align-self: center;
        }
        /*좌우 정렬*/
        .h-align{
            text-align: center;
        }
        /*아래 패딩*/
        .padding-bottom{
            padding-bottom: 10px;
        }
        /*가격 우측 정렬*/
        .price{
            text-align: right;
        }
        /*div{*/
        /*    border: solid red 1px;*/
        /*}*/
    </style>
    <script>
        /*csrf 토큰 정보*/
        const token = $("meta[name='_csrf']").attr("content");
        const header = $("meta[name='_csrf_header']").attr("content");
        /*체크 여부 수정*/
        function addToCart(productNo) {

            let count = $("#purchaseCount").val()

            // 쿼리 실행 시키고 얼웨이즈 카트로 갈지 그냥 닫을지
            /*ajax 설정*/
            $.ajaxSetup({
                url: '/cart/addToCart', // 요청할 서버url
                type: "POST" // 타입 (get, post, put 등등)
                // global: false, // 동시에 실행 x, 비동기화 여부 (default : true)
            });

            $.ajax({
                data: // 보낼 데이터 (Object , String, Array)
                    {
                        productNo : productNo,
                        count : count
                    }
                // , beforeSend : function(xhr) {
                //     xhr.setRequestHeader(header, token)
                // }

                // , dataType : 'json',       // 데이터 타입 (html, xml, json, text 등등)
                // contentType: 'application/json'
                // headers : {              // Http header
                //     "Content-Type" : "application/json",
                //     "X-HTTP-Method-Override" : "POST"
                // },
            })
            .done(function (result) { // 수행할 동작
                // alert("성공")
                // return location.href = "trolley"
            })
            .fail(function(jqXHR) { // 실패시
                // alert("실패")
                // return location.href = "trolley"
            })
            .always(function() { // 항상 동작
                // alert("항상");

            })
        }
    </script>
</head>
<body style="background-color: black">
    <div class="container" style="margin-top: 3%">
        <div class="row">
            <div class="col-lg-4">
                <!--썸네일-->
                <!--    <td> <img th:src="@{${productDetail.productImageDTOList.get(0).getImgPath()}}" class="image"/></td>-->
<!--                <img src="/static/img/common/guitar-painting-image.jpg" style="width: 100%; max-height: 512px">-->
                <img src="/static/img/common/piano.jpg" style="width: 100%; height: auto">
            </div>
            <div class="col-lg-1">
                <div class="row" style="margin-bottom: 15px">
                    <!--추가 사진-->
                    <!--    <td> <img th:src="@{${productDetail.productImageDTOList.get(1).getImgPath()}}" class="image"/></td>-->
                    <img src="/static/img/common/piano.jpg" style="width: 100%; max-height: 256px">
<!--                    <img src="/static/img/common/guitar-painting-image.jpg" style="width: 256px; height: 256px">-->
                </div>
                <div class="row">
                    <!--추가 사진-->
                    <!--    <td> <img th:src="@{${productDetail.productImageDTOList.get(2).getImgPath()}}" class="image"/></td>-->
                    <img src="/static/img/common/piano.jpg" style="width: 100%; max-height: 256px">
<!--                    <img src="/static/img/common/guitar-painting-image.jpg" style="width: 256px; height: 256px">-->
                </div>
            </div>
            <div class="col-lg-6" style="padding-left: 50px">
                <div class="row mid-font">
<!--                    <p th:text="${ productDetail.productName }"/>-->
                    <p>프랑스, 1900년 중기 추정, Joseph Guarnerius(_labeled)</p>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>품명</span>
                    </div>
                    <div class="col-lg-9">
<!--                        <span th:text="${ productDetail.productName }"/>-->
                        <span>바이올린(4/4)</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>제작자</span>
                    </div>
                    <div class="col-lg-9">
                        <span>Joseph Guarnerius (_labeled)</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>제작국</span>
                    </div>
                    <div class="col-lg-9">
                        <span>프랑스(Mrecourt)</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>제작년도</span>
                    </div>
                    <div class="col-lg-9">
                        <span>1900년 중기 추정</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>라벨</span>
                    </div>
                    <div class="col-lg-9">
                        <span>Joseph Guarnerius fecit Cremonae anno 17</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>판매 가격</span>
                    </div>
                    <div class="col-lg-9">
                        <!--    <td th:text="${ productDetail.productPrice }"></td>-->
                        <span>15,000$</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>설명</span>
                    </div>
                    <div class="col-lg-9">
                        <!--    <td th:text="${ productDetail.productDesc }"></td>-->
                        <span>케이스 포함입니다. Rampal의 보증서(2016년 발행)가 있습니다.</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>상태</span>
                    </div>
                    <div class="col-lg-9">
                        <span>필요한 수리 없습니다.</span>
                    </div>
                </div>
                <div class="row padding-bottom">
                    <div class="col-lg-3 h-align v-align">
                        <span>사이즈</span>
                    </div>
                    <div class="col-lg-9">
                        <span>Body length(355mm), Upper bout(164mm), C bout(109mm), Lower bout(201mm), Rib(30 ~ 31mm)</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3"></div>
                    <div class="col-lg-4">
                        <input id="purchaseCount" type="number" style="width: 80px" min="1" th:max="${ productDetail.productQty }">
                    </div>
                    <div class="col-lg-3">
<!--                        <button type="button" class="orange-button">Add To Cart</button>-->
<!--                        <button type="button" class="btn btn-warning" th:onclick="|addToCart(${product.productNo}, 1)|" data-toggle="modal" data-target="#cartModal">Add To Cart</button>-->
                        <button type="button" class="btn btn-warning" th:onclick="|addToCart(${productDetail.productNo})|" data-toggle="modal" data-target="#cartModal">Add To Cart</button>
                        <!-- The Modal -->
                        <div class="modal" id="cartModal">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h4 class="modal-title">장바구니 담기 성공!</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <!-- Modal body -->
                                    <div class="modal-body">
                                        장바구니 페이지로 이동하시겠습니까?
                                    </div>
                                    <!-- Modal footer -->
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-success" onclick="location.href='/cart/trolley'">Cart</button>
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mid-font">
            Recommandation
        </div>
        <div class="row">
            <div class="col-lg-2">
                <img src="/static/img/common/piano.jpg" style="width: 100%; max-height: 256px">
            </div>
            <div class="col-lg-2">
                <img src="/static/img/common/piano.jpg" style="width: 100%; max-height: 256px">
            </div>
        </div>
    </div>

<div th:include="/fragments/header"></div>
<table align="center" border="1">
    <tr>
        <th>번호</th>
        <th>이름</th>
        <th>가격</th>
        <th>설명</th>
        <th>수량</th>
        <th>카테고리</th>
        <th>대표이미지</th>
        <th>b</th>
        <th>s</th>
    </tr>
<!--    <tr th:each="product : ${ productList }">-->
        <tr>
        <td th:text="${ productDetail.productNo }"></td><!--dto의 필드명호출, getter없으면 에러남 내부에서 getter호출 -->
        <td th:text="${ productDetail.productName }"></td>
        <td th:text="${ productDetail.productPrice }"></td>
        <td th:text="${ productDetail.productDesc }"></td>
        <td th:text="${ productDetail.productQty }"></td>
        <td th:text="${ productDetail.categoryCode }"></td>
        <td> <img th:src="@{${productDetail.productImageDTOList.get(0).getImgPath()}}" class="image"/></td>
            <td> <img th:src="@{${productDetail.productImageDTOList.get(1).getImgPath()}}" class="image"/></td>
            <td> <img th:src="@{${productDetail.productImageDTOList.get(2).getImgPath()}}" class="image"/></td>
    </tr>
</table>
<!--<button type="button" th:onclick="|location.href='@{
/product/edit/{productDetail.productNo}}'|"> 목록으로 돌아가기 </button>-->
<button type="button" th:href="@{/product/edit/(code= ${productDetail.productNo} )}"> 목록으로 돌아가기 </button>
<a  th:href="@{|/product/regist|}"> 목록     으로 돌아가기</a>
<!--<a  th:href="@{|/product/edit/${productDetail.productNo}|}"> 상품 정보 수정</a>-->
<a  th:href="@{|/product/edit/${productDetail.productNo}|}"> 상품 정보 수정</a>
<!--th:href=" @{/article/list(id= ${data} )} "-->
<!--<button th:onclick="|location.href='@{view(uid=${data.uid})}'|">View page</button>-->
<!--<button th:onclick="|location.href='@{/product/edit/(uid=${product.productNo})}'|" style="background-color: red">-->
<!--     상품 정보 수정-->
<!--</button>-->
<!--th:onclick="|location.href='@{/boards/{uid}/delete(uid=${board.uid})}'|"-->
</body>
</html>