<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf?.token}">
    <meta name="_csrf_header" th:content="${_csrf?.headerName}">
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>Title</title>
    <style>
        html{
            background-color: black;
        }
        /*tr{*/
        /*    color: white;*/
        /*}*/
        /*.prodList{*/
        /*    grid-template: repeat(3, 1fr);*/
        /*}*/
        .image{
            width: 200px;
            height: 300px;

        }

        .record{
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            column-gap: 50px;
            row-gap: 20px;
            padding: 5rem 16rem
        }
        .col{
            /*margin: 30px;*/
            width: 300px;
            padding: 10px 10px 20px 10px;
            border: 1px solid #bfbfbf;
            background-color: #fff;
            box-shadow: 2px 2px 3px rgba(135, 139,144,0.4);
            /* transform: rotate(9deg); */
            align-content: center;
        }

        .text-area p{
            margin-bottom: 0;
        }

        /*img{*/
        /*    width: 300px;*/
        /*    height: 180px;*/
        /*}*/

        p{
            text-align: center;
            /*font-family: "바탕";*/
            font-weight: 600;
            font-size: 16px;
            color: cadetblue;
        }
        #page-wrapper {
            padding-left: 250px;
        }

        #sidebar-wrapper {
            position: fixed;
            width: 250px;
            height: 100%;
            margin-left: -250px;
            background: #000;
            overflow-x: hidden;
            overflow-y: auto;
        }

        #page-content-wrapper {
            width: 100%;
            padding: 20px;
        }
        /* 사이드바 스타일 */

        .sidebar-nav {
            width: 250px;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .sidebar-nav li {
            text-indent: 1.5em;
            line-height: 2.8em;
        }

        .sidebar-nav li a {
            display: block;
            text-decoration: none;
            color: #999;
            font-family: BodoniXT;

        }

        .sidebar-nav li a:hover {
            color: #ffd700;
            background: rgba(255, 255, 255, 0.2);
            font-size: 28px;

        }

        .sidebar-nav > .sidebar-brand {
            font-size: 1.3em;
            line-height: 3em;
        }
    </style>
    <script>

        function categoooo(categoryCode, bigCode) {

            /*ajax 설정*/
            $.ajaxSetup({
                url: 'list', // 요청할 서버url

        /*csrf 토큰 정보*/
        const token = $("meta[name='_csrf']").attr("content");
        const header = $("meta[name='_csrf_header']").attr("content");
        /*체크 여부 수정*/
        function addToCart(productNo, count) {

            // 쿼리 실행 시키고 얼웨이즈 카트로 갈지 그냥 닫을지
            /*ajax 설정*/
            $.ajaxSetup({
                url: '/cart/addToCart', // 요청할 서버url

                type: "POST" // 타입 (get, post, put 등등)
                // global: false, // 동시에 실행 x, 비동기화 여부 (default : true)
            });

            $.ajax({
                data: // 보낼 데이터 (Object , String, Array)
                    {

                        categoryCode : categoryCode,
                        bigCode : bigCode
                    },
                // beforeSend : function(xhr) {
                //     xhr.setRequestHeader(header, token)
                // },
                // dataType : 'json',       // 데이터 타입 (html, xml, json, text 등등)

                        productNo : productNo,
                        count : count
                    }
                // , beforeSend : function(xhr) {
                //     xhr.setRequestHeader(header, token)
                // }

                // , dataType : 'json',       // 데이터 타입 (html, xml, json, text 등등)

                // contentType: 'application/json'
                // headers : {              // Http header
                //     "Content-Type" : "application/json",
                //     "X-HTTP-Method-Override" : "POST"
                // },
            })

                .done(function (result) { // 수행할 동작
                     return location.href = "list"
                })
                .fail(function(jqXHR) { // 실패시
                    alert("실패")
                    //  return location.href = "trolley"
                })
            // .always(function() { // 항상 동작
            //     alert("작동");
            // })

 

        }
    </script>
</head>
<body>
<header>
    <div th:include="fragments/header.html"></div>

</header>

<!--<div th:include="fragments/sidebar.html"></div>-->
<!--<div th:fragment="sidebarFragment">-->
<!--    &lt;!&ndash;        내용&ndash;&gt;-->
<!--    &lt;!&ndash;        <h1>Header Section</h1>&ndash;&gt;-->
<!--</div>-->

<!--<div id="page-wrapper">-->
<!--    &lt;!&ndash; 사이드바 &ndash;&gt;-->
<!--    <div id="sidebar-wrapper">-->
<!--        <ul class="sidebar-nav">-->
<!--            <li class="sidebar-brand">-->
<!--                <br>-->
<!--                <br>-->
<!--            </li>-->
<!--            &lt;!&ndash;            <div class="col" th:each="product : ${ productList }">&ndash;&gt;-->
<!--            &lt;!&ndash;            <a th:href="@{/oreder/details(id=${orderInfo.seq})}">&ndash;&gt;-->
<!--&lt;!&ndash;           근데 리스트에서 첫번째의 카테고리 이면 ,, 반복문을 돌리지 않으면 안될텐데? 리스트의 모든 것을 확인해서-->
<!--카테고리를 찾아야 하니까..-->
<!--정적 쿼리문을ㅇ 쓴다면 메소드를 3개씩만들어야겠지만, href 에 뭐라고 써야할지 모름.... 여기서 반복을 돌아야 하나?-->
<!--ㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠ-->
<!--ajax로 처리한다는게 뭐지?????????????????????????????????????????????&ndash;&gt;-->
<!--            <li><a th:href="@{/product/list(category=${productList.get(0).categoryCode})}">Strings 현악기</a></li>-->
<!--            <li><a href="/product/list/clavier">Clavier 건반악기</a></li>-->
<!--            <li><a th:href="@{/product/list(category='C1')}">Winds 관악기</a></li>-->
<!--            <li><a href="/product/list">전체 상품</a></li>-->
<!--            <li><a href="#">할인 상품</a></li>-->
<!--            <li><a href="#">상품 관리</a></li>-->
<!--            &lt;!&ndash;            <a  th:href="@{|/product/edit/${productDetail.productNo}|}"> 상품 정보 수정</a>&ndash;&gt;-->
<!--            &lt;!&ndash;            </div>&ndash;&gt;-->
<!--        </ul>-->
<!--    </div>-->
<!--    &lt;!&ndash; /사이드바 &ndash;&gt;-->

<!--    &lt;!&ndash; 본문 &ndash;&gt;-->
<!--    <div id="page-content-wrapper">-->
<!--        <div class="container-fluid">-->

<!--        </div>-->
<!--    </div>-->
    <!-- /본문 -->
</div>
<div class="record">
<!--    <a th:href="@{/product/list/}">-->
<!--        <a href="product/" th:attrappend="href=${ productList.get(i).categoryCode }">-->
<!--        <img src="/img/common/present_3.jpg">-->
<!--    </a>-->

    <button type="button" onclick="categoooo('STRING')">현악기</button>
    <button type="button" onclick="categoooo('WIND')">관악기</button>
    <button type="button" onclick="categoooo('CLAVIER')">건반악기</button>

    <div class="col" th:each="product : ${ productList }">

<!--        <th:block th:if="bigCode =='WIND'">-->
            <div class="img-area">
                <a th:href="@{|/product/detail/${product.productNo}|}">
                    <img th:src="@{${product.productImageDTOList.get(0).getImgPath()}}" class="image"/>
                </a>
            </div>
            <!--<br>-->
            <!--            <span th:text="${ product.productNo }"></span>-->
            <div class="text-area">
                <p th:text="${ product.productName }"></p>
                <p th:text="${ product.productPrice }"></p>
                <a href="/cart/trolley">
                    <p th:include="fragments/button.html"></p>
                </a>
            </div>
<!--        </th:block>-->

<!--            <span th:text="${ product.productDesc }"></span>-->

        <div class="img-area">
          <a th:href="@{|/product/detail/${product.productNo}|}">
               <img th:src="@{${product.productImageDTOList.get(0).getImgPath()}}" class="image"/>
          </a>
        </div>
<!--<br>-->
<!--            <span th:text="${ product.productNo }"></span>-->
        <div class="text-area">
            <p th:text="${ product.productName }"></p>
            <p th:text="${ product.productPrice }"></p>
            <button type="button" class="btn btn-warning" th:onclick="|addToCart(${product.productNo}, 1)|" data-toggle="modal" data-target="#cartModal">Add To Cart</button>
<!--            <a href="/cart/trolley">-->
<!--                <p th:include="fragments/button.html"></p>-->
<!--            </a>-->


        <!--            <span th:text="${ product.productDesc }"></span>-->

<!--            <span th:text="${ product.productQty }"></span>-->
            <!--/*@thymesVar id="productCode" type=""*/-->
<!--            <span th:text="${ product.categoryCode }"></span>-->

<!--        <a href="item.html" th:href="@{|/basic/items/${item.id}|}"-->
    </div>
</div>
<!--<div class="prodList">-->
<!--    <div class="prod" th:each="product : ${ productList }">-->
<!--        <div th:src="@{/img/}"></div>-->
<!--        <div th:text="${product.productName}"></div>-->
<!--        <div th:text="${product.productPrice}"></div>-->
<!--        <div th:include="fragments/button.html"></div>-->
<!--        <div th:src="@{${item.getImgPath()}}"></div>-->
<!--    </div>-->
<!--</div>-->
<!--<button onclick="location.href='/product/regist'">상품등록</button>-->
<!--<button onclick="location.href='/product/edit'">상품정보수정</button>-->
<!--<button onclick="location.href='/product/delete'">상품삭제</button>-->
<!--<div th:src="@{${item.getImgPath()}}"></div>-->
<!--<footer>-->
    <div th:include="fragments/footer.html"></div>
<!--<script th:inline="javascript">-->
<!--    $.ajaxSetup({-->
<!--        url: 'list', // 요청할 서버url-->
<!--        type: "GET" // 타입 (get, post, put 등등)-->
<!--// global: false, // 동시에 실행 x, 비동기화 여부 (default : true)-->
<!--    });-->

<!--    $.ajax({-->
<!--        data: // 보낼 데이터 (Object , String, Array)-->
<!--            {-->
<!--                // cartNo : cartNo,-->
<!--                category : categoryCode-->
<!--            },-->
<!--        beforeSend : function(xhr) {-->
<!--            xhr.setRequestHeader(header, token)-->
<!--        }-->
<!--// dataType : 'json',       // 데이터 타입 (html, xml, json, text 등등)-->
<!--// headers : {              // Http header-->
<!--//     "Content-Type" : "application/json",-->
<!--//     "X-HTTP-Method-Override" : "POST"-->
<!--// },-->
<!--    })-->
<!--        .done(function (result) { // 수행할 동작-->
<!--// return location.href = "trolley"-->
<!--        })-->
<!--        .fail(function(jqXHR) { // 실패시-->
<!--// alert("실패!")-->
<!--        })-->
<!--    // .always(function() { // 항상 동작-->
<!--    //     alert("작동");-->
<!--    // })-->
<!--</script>-->
<!-- 페이징처리 시작 -->
<!--<nav>-->
<!--    <ul class="pagination justify-content-center">-->
<!--        &lt;!&ndash; getPrePage : 이전 페이지 &ndash;&gt;-->
<!--        <li class="page-item" th:classappend="${list.getPrePage() == 0} ? 'disabled'">-->
<!--            <a class="page-link" th:href="@{/question/list(pageNum=${list.getPrePage()})}">-->
<!--                <span>이전</span>-->
<!--            </a>-->
<!--        </li>-->
<!--        &lt;!&ndash; getNavigateFirstPage() : 페이징의 처음 숫자 getNavigateLastPage : 페이징의 마지막 숫자를 이용해 페이징 숫자 출력 &ndash;&gt;-->

<!--        <li class="page-item" th:each="page: ${#numbers.sequence(list.getNavigateFirstPage(), list.getNavigateLastPage())}" th:classappend="${page == list.getPageNum()} ? 'active'">-->
<!--            <a class="page-link" th:text="${page}" th:href="@{/question/list(pageNum=${page})}"></a>-->
<!--        </li>-->
<!--        &lt;!&ndash; getPrePage : 다음 페이지 &ndash;&gt;-->
<!--        <li class="page-item" th:classappend="${list.getNextPage() == 0} ? 'disabled'">-->

<!--            <a class="page-link" th:href="@{/question/list(pageNum=${list.getNextPage()})}">-->
<!--                <span>다음</span>-->
<!--            </a>-->
<!--        </li>-->
<!--    </ul>-->
<!--</nav>-->
<!-- 페이징처리 끝 -->
<!--</footer>-->
<!--<script src="http://code.jquery.com/jquery-latest.js"></script>       //필수 script입니다.-->

<!--<script th:inline="javascript">-->
<!--    $(function(){-->
<!--        // Collapse button event-->
<!--        $('#sidebarCollapse').on('click', function() {-->
<!--            $('#sidebarCollapseBtn').toggleClass('active');-->
<!--            $('#sidebar').toggleClass('active');-->
<!--        });-->

<!--        // Create sidebar from category-->
<!--        $.ajax({-->
<!--            method : 'GET',-->
<!--            url: $('meta[name=context-path]').attr("content") + 'category',-->
<!--        }).done(function(result){-->
<!--            // Append tag-->
<!--            var list = '';-->
<!--            var class_name = 'nav-link';-->
<!--            $.each(result, function(i, category){-->
<!--                list += '<li><a href="'+$('meta[name=context-path]').attr("content")+'main?categoryNm='+category.nm+'&categoryLabelNm='+category.labelNm+'">'+category.labelNm+'</a></li>';-->
<!--            });-->
<!--            $('#category').html(list);-->
<!--        }).fail(function(xhr, ajaxOptions, thrownError){-->
<!--            alert(xhr);-->
<!--        });-->
<!--    })-->
<!--</script>-->

</body>
</html>